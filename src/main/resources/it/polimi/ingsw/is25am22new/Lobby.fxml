<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import javafx.geometry.Insets?>

<StackPane xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="it.polimi.ingsw.is25am22new.FXMLControllers.LobbyController">

    <!-- Static Background Image -->
    <ImageView fitHeight="720.0" fitWidth="1280.0" pickOnBounds="true" preserveRatio="true" opacity="0.7">
        <image>
            <Image url="@Graphics/AstronautInSpace.jpg" />
        </image>
    </ImageView>

    <!-- Semi-transparent overlay for better text readability -->
    <Pane style="-fx-background-color: rgba(0, 10, 40, 0.4); -fx-background-radius: 15;"/>

    <!-- Content Pane -->
    <VBox alignment="CENTER" spacing="20" maxWidth="800" maxHeight="1000">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>

        <Label text="Game Lobby" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #e0f7ff;"/>

        <!-- Game Type and Max Players Selection -->
        <HBox alignment="CENTER" spacing="10" maxWidth="1200" fx:id="settingsHBox">

            <HBox alignment="CENTER" spacing="10">
                <Label text="Select Game Type: " style="-fx-font-size: 15px; -fx-text-fill: #e0f7ff;"/>
                <ComboBox fx:id="gameTypeComboBox" promptText="Select Game Type" prefWidth="140" />
            </HBox>

            <HBox alignment="CENTER" spacing="10">
                <Label text="Max Players: " style="-fx-font-size: 15px; -fx-text-fill: #e0f7ff;"/>
                <ComboBox fx:id="maxPlayersComboBox" promptText="Enter number" prefWidth="120" />
            </HBox>

            <Button fx:id="confirmSettingsButton" text="CONFIRM" onAction="#confirmSettings"/>
        </HBox>
        <Label fx:id="errorLabel" textFill="RED" alignment="CENTER" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
        <HBox alignment="CENTER" spacing="10" maxWidth="600">
            <!-- Info and Player Status -->
            <VBox alignment="CENTER" spacing="10" maxWidth="600">
                <Label text="Connected Players" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #e0f7ff;" alignment="CENTER"/>
                <ListView fx:id="playerListView" VBox.vgrow="ALWAYS" prefHeight="250"/>
            </VBox>
            <!-- Status Section -->
            <VBox spacing="10" HBox.hgrow="ALWAYS">
                <Label text="Game Status" style="-fx-font-size: 17px; -fx-font-weight: bold; -fx-text-fill: #e0f7ff;" alignment="CENTER" maxWidth="Infinity"/>
                <TextArea fx:id="statusTextArea" VBox.vgrow="ALWAYS" prefHeight="200" editable="false" wrapText="true"/>
            </VBox>
        </HBox>

        <HBox alignment="CENTER" spacing="10" maxWidth="600">
            <Label fx:id="gameTypeLabel" text="Game Type: ---" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #e0f7ff;"/>
            <Label fx:id="maxPlayersLabel" text="Max Players: ---" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #e0f7ff;"/>
        </HBox>

        <!-- Buttons -->
        <HBox spacing="50" alignment="CENTER">
            <Button fx:id="readyButton" text="READY" onAction="#toggleReady"/>
            <Button fx:id="exitButton" text="EXIT" onAction="#exitLobby"/>
            <Button fx:id="startGameButton" text="START GAME" onAction="#testBuildingShip"/>
        </HBox>
    </VBox>
</StackPane>
